"use strict";(self["webpackChunkapi"]=self["webpackChunkapi"]||[]).push([[7],{509:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var a=n(252),o=n(963),s=n(577);const r=t=>((0,a.dD)("data-v-7cf7a5a5"),t=t(),(0,a.Cn)(),t),l={class:"Container"},i=r((()=>(0,a._)("div",{class:"google-map",id:"map"},null,-1))),u={class:"search"},c=r((()=>(0,a._)("h3",null,"請輸入餐廳名稱",-1))),d=r((()=>(0,a._)("h4",{class:"restaurant-title"},"餐廳候補",-1))),m={class:"list-group list-group-numbered"},p=["onClick"],g=(0,a.Uk)("抽選"),w={key:0,class:"result"};function v(t,e,n,r,v,f){const b=(0,a.up)("buttom");return(0,a.wg)(),(0,a.iD)("div",l,[i,(0,a._)("div",u,[c,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control form-label",id:"search_Input",ref:"searchrestaurant","onUpdate:modelValue":e[0]||(e[0]=t=>r.inputValue=t)},null,512),[[o.nr,r.inputValue]]),(0,a._)("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=t=>r.add())},"加入餐廳選擇"),d,(0,a._)("ol",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.favoriteRestaurant,((t,e)=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",key:e},[(0,a.Uk)((0,s.zw)(t)+" ",1),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:t=>r.remove(e)},"刪除",8,p)])))),128))]),(0,a.Wm)(b,{class:"btn btn-primary btnlots",onClick:e[2]||(e[2]=t=>r.drawlots())},{default:(0,a.w5)((()=>[g])),_:1}),r.draws?((0,a.wg)(),(0,a.iD)("div",w,(0,s.zw)(r.favoriteRestaurant[r.number]),1)):(0,a.kq)("",!0)])])}var f=n(262),b={name:"app-restaurant",setup(){let t;const e=23.553118,n=121.0211024;let o;const s=(0,f.iH)();let r,l,i,u,c;const d=(0,f.iH)([]),m=(0,f.iH)(),p=(0,f.iH)(),g=(0,f.iH)(!1),w=function(){p.value=Math.floor(Math.random()*d.value.length),g.value=!0},v=JSON.parse(localStorage.getItem("restaurantList"))||[];v.forEach((function(t){d.value.push(t.name)}));const b=function(t){d.value.splice(t,1);const e=JSON.parse(localStorage.restaurantList.trim());console.log(e[t].name);const n=JSON.parse(localStorage.getItem("restaurantList"))||[],a=n.filter((n=>n.name!==e[t].name));console.log(a),localStorage.setItem("restaurantList",JSON.stringify(a)),g.value=!1},h=function(){if(m.value.trim()){d.value.push(r.name),m.value="";const t=JSON.parse(localStorage.getItem("restaurantList"))||[];t.push(r),localStorage.setItem("restaurantList",JSON.stringify(t))}g.value=!1},_=function(){t=new window.google.maps.Map(document.getElementById("map"),{center:{lat:e,lng:n},zoom:7,maxZoom:20,minZoom:3,streetViewControl:!1,mapTypeControl:!1}),navigator.geolocation.getCurrentPosition((function(e){o={lat:e.coords.latitude,lng:e.coords.longitude},t.setCenter(o),t.setZoom(16);const n=new window.google.maps.places.Autocomplete(s.value,{types:["restaurant"],bounds:{east:o.lng+.001,west:o.lng-.001,south:o.lat-.001,north:o.lat+.001},strictBounds:!1});n.bindTo("bounds",t),n.addListener("place_changed",(function(){const e=n.getPlace();r={location:e.geometry.location,placeId:e.place_id,name:e.name,address:e.formatted_address,phoneNumber:e.formatted_phone_number,rating:e.rating},t.setCenter(r.location),l||(l=new window.google.maps.Marker({map:t})),l.setPosition(r.location),i||(i=new window.google.maps.DirectionsService),u||(u=new window.google.maps.DirectionsRenderer({map:t})),u.set("direction",null),i.route({origin:new window.google.maps.LatLng(o.lat,o.lng),destination:{placeId:r.placeId},travelMode:"WALKING"},(function(e,n){"OK"===n&&(u.setDirections(e),c||(c=new window.google.maps.InfoWindow),c.setContent(`\n                <h3>${r.name}</h3>\n                <div>地址：${r.address}</div>\n                <div>電話：${r.phoneNumber}</div>\n                <div>評分：${r.rating}</div>\n                <div>步行時間：${e.routes[0].legs[0].duration.text}</div>\n                `),c.open(t,l))}))}))}))};return(0,a.bv)((()=>{_()})),{draws:g,number:p,map:t,lat:e,lng:n,searchrestaurant:s,add:h,favoriteRestaurant:d,inputValue:m,remove:b,drawlots:w}}},h=n(744);const _=(0,h.Z)(b,[["render",v],["__scopeId","data-v-7cf7a5a5"]]);var k=_}}]);
//# sourceMappingURL=restaurant.73b79212.js.map