{"version":3,"file":"js/restaurant.73b79212.js","mappings":"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","sources":["webpack://api/./src/views/restaurant.vue","webpack://api/./src/views/restaurant.vue?b7aa"],"sourcesContent":["<template>\r\n    <div class=\"Container\">\r\n        <!--地圖呈現在此-->\r\n      <div class=\"google-map\" id=\"map\"></div>\r\n      <div class=\"search\">\r\n        <h3 >請輸入餐廳名稱</h3>\r\n        <input type='text' class='form-control form-label' id=\"search_Input\" ref=\"searchrestaurant\" v-model=\"inputValue\"/>\r\n        <button class='btn btn-primary' @click=\"add()\">加入餐廳選擇</button>\r\n\r\n        <h4 class=\"restaurant-title\">餐廳候補</h4>\r\n          <ol class=\"list-group list-group-numbered\">\r\n            <li\r\n              class=\"list-group-item\"\r\n              v-for=\"(item, index) in favoriteRestaurant\"\r\n              :key=\"index\">{{item}}\r\n              <button type=\"button\" class=\"btn btn-primary\" @click=\"remove(index)\">刪除</button>\r\n              </li>\r\n          </ol>\r\n\r\n        <buttom class=\"btn btn-primary btnlots\" @click=\"drawlots()\">抽選</buttom>\r\n        <div class=\"result\" v-if=\"draws\">{{favoriteRestaurant[number]}}</div>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script >\r\nimport { ref, onMounted } from 'vue'\r\nexport default {\r\n  name: 'app-restaurant',\r\n  setup () {\r\n    let map\r\n    const lat = 23.553118\r\n    const lng = 121.0211024\r\n    let currentPosition\r\n    const searchrestaurant = ref()\r\n    let selectedRestaurant\r\n    let marker\r\n    let directionService\r\n    let directionRenderer\r\n    let infowindow\r\n    const favoriteRestaurant = ref([])\r\n    const inputValue = ref()\r\n    const number = ref()\r\n    const draws = ref(false)\r\n\r\n    const drawlots = function () {\r\n      number.value = Math.floor(Math.random() * favoriteRestaurant.value.length)\r\n      draws.value = true\r\n    }\r\n\r\n    const restaurantList = JSON.parse(localStorage.getItem('restaurantList')) || []\r\n    restaurantList.forEach(function (restaurant) {\r\n      favoriteRestaurant.value.push(restaurant.name)\r\n    })\r\n\r\n    const remove = function (index) {\r\n      favoriteRestaurant.value.splice(index, 1)\r\n      const removeName = JSON.parse(localStorage.restaurantList.trim())\r\n      console.log(removeName[index].name)\r\n      const restaurantList = JSON.parse(localStorage.getItem('restaurantList')) || []\r\n      const removerestaurant = restaurantList.filter(restaurant =>\r\n        restaurant.name !== removeName[index].name\r\n      )\r\n      console.log(removerestaurant)\r\n      localStorage.setItem('restaurantList', JSON.stringify(removerestaurant))\r\n\r\n      draws.value = false\r\n    }\r\n    const add = function () {\r\n      if (inputValue.value.trim()) {\r\n        favoriteRestaurant.value.push(selectedRestaurant.name)\r\n        inputValue.value = ''\r\n\r\n        const restaurantList = JSON.parse(localStorage.getItem('restaurantList')) || []\r\n        restaurantList.push(selectedRestaurant)\r\n        localStorage.setItem('restaurantList', JSON.stringify(restaurantList))\r\n      }\r\n      draws.value = false\r\n    }\r\n    const initMap = function () {\r\n      map = new window.google.maps.Map(document.getElementById('map'), {\r\n        // 設定地圖的中心點經緯度位置\r\n        center: { lat: lat, lng: lng },\r\n        // 設定地圖縮放比例 0-20\r\n        zoom: 7,\r\n        // 限制使用者能縮放地圖的最大比例\r\n        maxZoom: 20,\r\n        // 限制使用者能縮放地圖的最小比例\r\n        minZoom: 3,\r\n        // 設定是否呈現右下角街景小人\r\n        streetViewControl: false,\r\n        // 設定是否讓使用者可以切換地圖樣式：一般、衛星圖等\r\n        mapTypeControl: false\r\n      })\r\n      navigator.geolocation.getCurrentPosition(function (position) {\r\n        currentPosition = {\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude\r\n        }\r\n\r\n        map.setCenter(currentPosition)\r\n        map.setZoom(16)\r\n        const autocomplete = new window.google.maps.places.Autocomplete(\r\n          searchrestaurant.value,\r\n          {\r\n            types: ['restaurant'],\r\n            bounds: {\r\n              east: currentPosition.lng + 0.001,\r\n              west: currentPosition.lng - 0.001,\r\n              south: currentPosition.lat - 0.001,\r\n              north: currentPosition.lat + 0.001\r\n            },\r\n            strictBounds: false\r\n          }\r\n        )\r\n        autocomplete.bindTo('bounds', map)\r\n        autocomplete.addListener('place_changed', function () {\r\n          const place = autocomplete.getPlace()\r\n\r\n          selectedRestaurant = {\r\n            location: place.geometry.location,\r\n            placeId: place.place_id,\r\n            name: place.name,\r\n            address: place.formatted_address,\r\n            phoneNumber: place.formatted_phone_number,\r\n            rating: place.rating\r\n          }\r\n          map.setCenter(selectedRestaurant.location)\r\n\r\n          if (!marker) {\r\n            marker = new window.google.maps.Marker({\r\n              map: map\r\n            })\r\n          }\r\n          marker.setPosition(selectedRestaurant.location)\r\n\r\n          if (!directionService) {\r\n            directionService = new window.google.maps.DirectionsService()\r\n          }\r\n\r\n          if (!directionRenderer) {\r\n            directionRenderer = new window.google.maps.DirectionsRenderer({\r\n              map: map\r\n            })\r\n          }\r\n          directionRenderer.set('direction', null)\r\n\r\n          directionService.route({\r\n            origin: new window.google.maps.LatLng(\r\n              currentPosition.lat,\r\n              currentPosition.lng\r\n            ),\r\n            destination: {\r\n              placeId: selectedRestaurant.placeId\r\n            },\r\n            travelMode: 'WALKING'\r\n          },\r\n          function (response, status) {\r\n            if (status === 'OK') {\r\n              directionRenderer.setDirections(response)\r\n              if (!infowindow) {\r\n                infowindow = new window.google.maps.InfoWindow()\r\n              }\r\n              infowindow.setContent(\r\n                `\r\n                <h3>${selectedRestaurant.name}</h3>\r\n                <div>地址：${selectedRestaurant.address}</div>\r\n                <div>電話：${selectedRestaurant.phoneNumber}</div>\r\n                <div>評分：${selectedRestaurant.rating}</div>\r\n                <div>步行時間：${response.routes[0].legs[0].duration.text}</div>\r\n                `\r\n              )\r\n              infowindow.open(map, marker)\r\n            }\r\n          })\r\n        })\r\n      })\r\n    }\r\n    onMounted(() => {\r\n      initMap()\r\n    })\r\n\r\n    return { draws, number, map, lat, lng, searchrestaurant, add, favoriteRestaurant, inputValue, remove, drawlots }\r\n  }\r\n}\r\n</script>\r\n<style lang='scss' scoped>\r\n@import \"../../node_modules/bootstrap/scss/_functions\";\r\n@import \"../../node_modules/bootstrap/scss/variables\";\r\n@import \"../../node_modules/bootstrap/scss/_mixins\";\r\n@import \"../../node_modules/bootstrap/scss/bootstrap\";\r\n\r\n  .Container {\r\n    display: flex;\r\n  }\r\n  .restaurant-title{\r\n    margin-top:0.8rem;\r\n  }\r\n  .btn-primary {\r\n    height: 2rem;\r\n    font-size: 1rem;\r\n    line-height: 1rem;\r\n  }\r\n  .form-control {\r\n    width: 17rem;\r\n  }\r\n  .google-map {\r\n    width: 70%;\r\n    height: 100vh;\r\n  }\r\n  .search {\r\n    margin : 2rem 0 0 3rem;\r\n  }\r\n  .btnlots{\r\n    margin: 1rem 0;\r\n  }\r\n\r\n</style>\r\n","import { render } from \"./restaurant.vue?vue&type=template&id=7cf7a5a5&scoped=true\"\nimport script from \"./restaurant.vue?vue&type=script&lang=js\"\nexport * from \"./restaurant.vue?vue&type=script&lang=js\"\n\nimport \"./restaurant.vue?vue&type=style&index=0&id=7cf7a5a5&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\user0001\\\\Desktop\\\\api\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7cf7a5a5\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","_createElementBlock","_hoisted_2","_hoisted_4","type","ref","$setup","$event","onClick","_hoisted_5","_Fragment","_renderList","item","index","key","_hoisted_7","_createVNode","_component_buttom","_toDisplayString","name","setup","map","lat","lng","currentPosition","searchrestaurant","selectedRestaurant","marker","directionService","directionRenderer","infowindow","favoriteRestaurant","inputValue","number","draws","drawlots","value","Math","floor","random","length","restaurantList","JSON","parse","localStorage","getItem","forEach","restaurant","push","remove","splice","removeName","trim","console","log","removerestaurant","filter","setItem","stringify","add","initMap","window","google","maps","Map","document","getElementById","center","zoom","maxZoom","minZoom","streetViewControl","mapTypeControl","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","setCenter","setZoom","autocomplete","places","Autocomplete","types","bounds","east","west","south","north","strictBounds","bindTo","addListener","place","getPlace","location","geometry","placeId","place_id","address","formatted_address","phoneNumber","formatted_phone_number","rating","Marker","setPosition","DirectionsService","DirectionsRenderer","set","route","origin","LatLng","destination","travelMode","response","status","setDirections","InfoWindow","setContent","routes","legs","duration","text","open","onMounted","__exports__","render"],"sourceRoot":""}